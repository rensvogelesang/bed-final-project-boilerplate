generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}



// USER

model User {
  id          String   @id @default(uuid())
  username    String   @unique
  password    String?
  name        String?
  email       String?
  phoneNumber String?
  pictureUrl  String?

  bookings    Booking[]
  reviews     Review[]

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}


// HOST

model Host {
  id          String   @id @default(uuid())
  username    String   @unique
  password    String
  name        String?
  email       String?
  phoneNumber String?
  pictureUrl  String?
  aboutMe     String?

  listings    Property[]

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}


// PROPERTY

model Property {
  id            String   @id @default(uuid())
  hostId        String

  title         String?
  description   String?
  location      String?
  pricePerNight Float
  bedroomCount  Int?
  bathroomCount Int?
  maxGuestCount Int?
  rating        Int?

  host          Host     @relation(fields: [hostId], references: [id], onDelete: Cascade)
  bookings      Booking[]
  reviews       Review[]

  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}


// BOOKING

model Booking {
  id             String   @id @default(uuid())
  userId         String
  propertyId     String

  checkInDate    DateTime
  checkOutDate   DateTime
  numberOfGuests Int?
  totalPrice     Float?
  bookingStatus  String   @default("PENDING")

  user           User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  property       Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)

  createdAt      DateTime @default(now())
}


// REVIEW

model Review {
  id         String   @id @default(uuid())
  userId     String
  propertyId String

  rating     Int
  comment    String?

  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  property   Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)

  createdAt  DateTime @default(now())
}